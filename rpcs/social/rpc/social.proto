syntax = "proto3";  //指定协议版本
package social; //默认包名,用于proto文件
option go_package = "./social"; //默认包名,用于生成的代码

//定义服务名
service Social{
  rpc PingSocial(PingReq) returns (Result);

  rpc GetFriendList(GetFriendListReq) returns (GetFriendListResp);
  rpc AddFriend(AddFriendReq) returns (AddFriendResp);
  rpc DeleteFriend(DeleteFriendReq) returns (DeleteFriendResp);
  rpc GetFriendRequestList(GetFriendRequestListReq) returns (GetFriendRequestListResp);
  rpc HandleFriendRequest(HandleFriendRequestReq) returns (HandleFriendRequestResp);
  rpc CreateFriend(CreateFriendReq) returns (CreateFriendResp);

  rpc GetGroupList(GetGroupListReq) returns (GetGroupListResp);
  rpc CreateGroup(CreateGroupReq) returns (CreateGroupResp);
  rpc DeleteGroup(DeleteGroupReq) returns (DeleteGroupResp);
  rpc JoinGroup(JoinGroupReq) returns (JoinGroupResp);
  rpc CreateGroupMember(CreateGroupMemberReq) returns (CreateGroupMemberResp);
  rpc CreateGroupMemberRequest(CreateGroupMemberRequestReq) returns (CreateGroupMemberRequestResp);
  rpc LeaveGroup(LeaveGroupReq) returns (LeaveGroupResp);
  rpc GetGroupMemberList(GetGroupMemberListReq) returns (GetGroupMemberListResp);
  rpc GetGroupRequestList(GetGroupRequestListReq) returns (GetGroupRequestListResp);
  rpc HandleGroupRequest(HandleGroupRequestReq) returns (HandleGroupRequestResp);
}

message PingReq{
  string msg = 1;
}
message Result{
  int32 code = 1;
  string msg = 2;
}

//好友数据结构
message Friend {
  uint64 friendIndex = 2;
  string comment = 3;
}
message GetFriendListReq{
  uint64 userIndex = 1;
}
message GetFriendListResp{
  int32 code = 1;
  string msg = 2;
  repeated Friend FriendList = 3;
}

message AddFriendReq{
  uint64 userIndex = 1;
  uint64 friendIndex = 2;
  string reqMsg = 3;
}
message AddFriendResp{
  int32 code = 1;
  string msg = 2;
}

message DeleteFriendReq{
  uint64 userIndex = 1;
  uint64 friendIndex = 2;
}
message DeleteFriendResp{
  int32 code = 1;
  string msg = 2;
}

//好友数据结构
message FriendRequest {
  uint64 friendIndex = 1;
  string reqMsg = 2;
  int64 reqTime = 3;
}
message GetFriendRequestListReq{
  uint64 userIndex = 1;
}
message GetFriendRequestListResp{
  int32 code = 1;
  string msg = 2;
  repeated FriendRequest FriendRequestList = 3;
}
message HandleFriendRequestReq{
  uint64 reqId = 1;
  int64 handleResult = 2;
  string handleMsg = 3;
}
message HandleFriendRequestResp{
  int32 code = 1;
  string msg = 2;
}

message CreateFriendReq{
  uint64 userIndex = 1;
  uint64 friendIndex = 2;
}
message CreateFriendResp{
  int32 code = 1;
  string msg = 2;
}

message Group {
  uint64 groupId = 1;
  string groupName = 2;
}
message GetGroupListReq{
  uint64 userIndex = 1;
}
message GetGroupListResp{
  int32 code = 1;
  string msg = 2;
  repeated Group groupList = 3;
}

message CreateGroupReq{
  uint64 userIndex = 1;
  string groupName = 2;
  int64 joinStatus = 3;
}
message CreateGroupResp{
  int32 code = 1;
  string msg = 2;
}

message DeleteGroupReq{

}
message DeleteGroupResp{
  int32 code = 1;
  string msg = 2;
}

message JoinGroupReq{
    uint64 groupId = 1;
    uint64 userIndex = 2;
    string reqMsg = 3;
}
message JoinGroupResp{
  int32 code = 1;
  string msg = 2;
}

message CreateGroupMemberReq{
  uint64 groupIndex = 1;
  uint64 userIndex = 2;
}
message CreateGroupMemberResp{
  int32 code = 1;
  string msg = 2;
}

message CreateGroupMemberRequestReq{
  uint64 groupIndex = 1;
  uint64 userIndex = 2;
  string reqMsg = 3;
}
message CreateGroupMemberRequestResp{
  int32 code = 1;
  string msg = 2;
}

message LeaveGroupReq{

}
message LeaveGroupResp{
  int32 code = 1;
  string msg = 2;
}

message GroupMember{
  uint64 userIndex = 1;
  uint64 userType = 2;
  uint64 userStatus = 3;
}
message GetGroupMemberListReq{
  uint64 groupIndex = 1;
}
message GetGroupMemberListResp{
  int32 code = 1;
  string msg = 2;
  repeated GroupMember groupMemberList = 3;
}

message GroupRequest{
  uint64 reqId = 1;
  uint64 userIndex = 2;
  string reqMsg = 3;
  int64 reqTime = 4;
  uint64 handlerIndex = 5;
  int64 handleResult = 6;
  string handleMsg = 7;
  int64 handleTime = 8;
}
message GetGroupRequestListReq{
  uint64 groupIndex = 1;
}
message GetGroupRequestListResp{
  int32 code = 1;
  string msg = 2;
  repeated GroupRequest groupRequestList = 3;
}

message HandleGroupRequestReq{
  uint64 reqId = 1;
  uint64 handlerIndex = 2;
  int64 handleResult = 3;
  string handleMsg = 4;
}
message HandleGroupRequestResp{
  int32 code = 1;
  string msg = 2;
}
